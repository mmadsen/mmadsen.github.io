
<!DOCTYPE html>
<html lang="en">
  <head prefix="dc: http://purl.org/dc/terms/ og: http://ogp.me/ns#">
    <meta charset="utf-8"/>
    <title>Analysis of Symmetry Metrics for Forests of Balanced Trees</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Lab Notebook for Mark E. Madsen"/>
    <meta name="author" content="Mark E. Madsen"/>

	<!-- Get date last modified from git log. (Uses current time if file entry not found, e.g. projects/)  -->
	


	<!-- For posts, page.date is the date they are published under, which we use as their 'canonical' dc:date -->
	 
	  
	  

	<!-- Posts declare modified timestamps in the sidebar, so would be redundant to put here. But then 
	     pages don't have a dc:modified... unless we give them their own (modified) sidebar?  
	-->
	<!-- Ideally we would want date originally created from the _oldest_ git commit too...-->

	<!-- RDFa Metadata (in DublinCore) -->
	<meta property="dc:title" content="Analysis of Symmetry Metrics for Forests of Balanced Trees" />
	<meta property="dc:creator" content="Mark E. Madsen" />
	<meta property="dc:date" content="2014-03-10T00:00:00-07:00" />
	<meta property="dc:format" content="text/html" />
	<meta property="dc:language" content="en" />
	<meta property="dc:identifier" content="/structured%20information%20project/2014/03/10/symmetries-multiple-tree-components.html" />
	<meta property="dc:rights" content="CC BY-NC-SA 3.0" />
	<meta property="dc:source" content="Lab Notebook for Mark E. Madsen" />
	<meta property="dc:subject" content="Anthropology" /> 
	<meta property="dc:type" content="website" /> 
	<!-- RDFa Metadata (in OpenGraph) -->
	<meta property="og:title" content="Analysis of Symmetry Metrics for Forests of Balanced Trees" />
	<meta property="og:author" content="notebook.madsenlab.org/bio.html" />  <!-- Should be Liquid? URI? -->
	<meta property="og:site_name" content="Lab Notebook for Mark E. Madsen" /> <!-- Same as dc:source? -->
	<meta property="og:url" content="notebook.madsenlab.org/structured%20information%20project/2014/03/10/symmetries-multiple-tree-components.html" />
	<meta property="og:type" content="website" /> 
	<!-- Google Scholar Metadata -->
	<meta name="citation_author" content="Mark E. Madsen"/>
	<meta name="citation_date" content="2014-03-10T00:00:00-07:00"/>
	<meta name="citation_title" content="Analysis of Symmetry Metrics for Forests of Balanced Trees"/>
	<meta name="citation_journal_title" content="Lab Notebook for Mark E. Madsen"/>

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }

      @media (max-width: 980px) {
        /* Enable use of floated navbar text */
        .navbar-text.pull-right {
          float: none;
          padding-left: 5px;
          padding-right: 5px;
        }
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    
  <script type="text/javascript" src="//use.typekit.net/xtg2arw.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script>
  MathJax.Hub.Config({
    showProcessingMessages: false,
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
  </script>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11944342-4', 'madsenlab.org');
  ga('send', 'pageview');

</script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">MadsenLabNotebook</a>
          <div class="nav-collapse collapse">
                  <!-- Search site using Google's index -->
      <form class="navbar-search pull-right" method="get" action="http://google.com/search">
        <p>
          <input type="hidden" name="q" value="site:notebook.madsenlab.org" />
          <input type="text" class="search-query" name="q" />
          <button class="btn btn-mini" type="submit"><i class="icon-search"></i></button> 
        </p>
      </form>
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="/labnotebook.html">About</a></li>
              <li><a href="http://about.me/mark.e.madsen">Contact</a></li>
              <li><a href="/blog.html">Essays</a></li>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header"><a href="/blog.html">Essays and General Writings</a></li>
              <li class="nav-header">Projects</li>
              <li><a href="/projects/coarsegraining/">Coarse Grained Models of CT</a></li>
              <li><a href="/projects/nicheconstruction/">Niche Construction and CT Modeling</a></li>
              <li><a href="/projects/structuredinfo/">CT of Structured Information</a></li>
              <li class="nav-header">Topics</li>
              <li><a href="/tag/cultural%20transmission.html">Cultural transmission theory</a></li>
              <li><a href="/tag/evolutionary%20theory.html">Darwinian evolutionary theory</a></li>
              <li><a href="/tag/ctpy.html">CTPy Simulation Modeling</a></li>
			  <li><a href="/tag/dissertation.html">Dissertation Research</a></li>
              <li><a href="/tag/reading%20notes.html">Reading notes</a></li>
              <li><a href="/experiments.html">Experiments and Analyses</a></li>
              <li><a href="/tags.html">Other notes by topic</a></li>
              <li class="nav-header">Meta</li>
              <li><a href="/bio.html">Bio</a></li>
              <li><a href="http://github.com/mmadsen">Software</a></li>
              <li><a href="/publications.html">Publications</a></li>
              <li><a href="/openscience.html">About Open Science</a></li>
			<li><a href="/labnotebook.html">About this Notebook</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span3-->

            <div class="span8">
  	<h2>Analysis of Symmetry Metrics for Forests of Balanced Trees</h2>
	

		<p class="text-info">
		<table class="table table-condensed">
			<tr class="info">
				<td><small><i class="icon-calendar"></i>&nbsp;Created: 10 Mar 2014</small></td>
				<td><small><i class="icon-calendar"></i>&nbsp;Modified: 11 Mar 2014</small></td>
				<td><small><i class="icon-book">&nbsp;</i>&nbsp;<a href=http://greycite.knowledgeblog.org/bib/?uri=http://notebook.madsenlab.org/structured%20information%20project/2014/03/10/symmetries-multiple-tree-components.html target='_blank'>BibTeX Entry</a>
</small></td>
				<td><small><i class="icon-book">&nbsp;</i>&nbsp;<a href=http://greycite.knowledgeblog.org/ris/?uri=http://notebook.madsenlab.org/structured%20information%20project/2014/03/10/symmetries-multiple-tree-components.html target='_blank'>RIS Citation</a>
</small></td>
				<td><small><a href="javascript:window.print()"><i class="icon-print"></i>&nbsp;Print</a></small></td>
			</tr>
		</table>
		</p>


  	
	
  <h3 id="symmetry-metrics-for-balanced-tree-forests">Symmetry Metrics for Balanced Tree Forests</h3>
<p>The goal is to understand how <code>nauty</code> output and symmetry metrics behave when we consider a forest with multiple disconnected trees. This situation would occur if we calculated symmetries across the entire set of trait trees when capturing statistics.</p>
<p>Some statistics, such as orbits, might crosscut trait trees if two trait trees shared adjacency relationships. In other situations, I’d expect them to be a disjoint union of results, and thus the statistics might simply be additive (and thus needing to be normalized by the number of configured trait trees). In other cases, such as <span class="math">\(|\textit{Aut}(G)|\)</span>, the relationship might be multiplicative and combinatorial.</p>
<p>I proceed by constructing a union graph of 2 balanced trait trees, then 3 and 4, and examining how the <code>nauty</code> output statistics scale. Then I look at a combination of different balanced trees. In the code sections below, I rely upon the <a href="https://github.com/mmadsen/axelrod-ct">axelrod-ct simulation model</a> available from my Github repository, Brendan McKay’s <code>nauty</code> library, and the Python <code>networkx</code> module.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">    <span class="ch">import</span> networkx <span class="ch">as</span> nx
    <span class="ch">import</span> madsenlab.axelrod.analysis <span class="ch">as</span> stats
    <span class="ch">import</span> madsenlab.axelrod.utils <span class="ch">as</span> utils

    conf = utils.TreeStructuredConfiguration(<span class="st">&quot;dummyconf.json&quot;</span>)
    conf.branching_factor = <span class="dv">4</span>
    conf.depth_factor = <span class="dv">4</span>

    sym = stats.BalancedTreeAutomorphismStatistics(conf)
    g1 = nx.balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)
    g2 = nx.balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)

    <span class="kw">print</span> sym.calculate_graph_symmetries(g1)

    {<span class="st">&#39;radius&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;orbitcounts&#39;</span>: [<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">16</span>, <span class="dv">64</span>, <span class="dv">256</span>], <span class="st">&#39;remainingdensity&#39;</span>: <span class="fl">1.0</span>, <span class="st">&#39;orbits&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;groupsize&#39;</span>: <span class="fl">2.079483819622e+117</span>}

    order_tree = stats.num_nodes_balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)
    starting_vertex = order_tree 
    g2A = nx.convert_node_labels_to_integers(g2, first_label = starting_vertex)

    graphs = []
    graphs.append(g1)
    graphs.append(g2A)</code></pre></td></tr></table>
<p>Below is the output for a forest with two trees with <span class="math">\(r=4, h=4\)</span>. We can see that the orbit number is the same, the multiplicities are simply different because the members of each orbit in each tree are interchangeable, so each multiplicity is twice the value in a single tree. The group size is much larger than twice, however, but we should expect there to be a multiplicative effect given that automorphisms scale as <span class="math">\(n!\)</span> for the complete graphs <span class="math">\(K_n\)</span>.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">    <span class="kw">print</span> sym._get_raw_nauty_output(forestd)

    <span class="dv">5</span> orbits; grpsize=<span class="fl">8.648505912135e234</span>; <span class="dv">511</span> gens; <span class="dv">121276</span> nodes; maxlev=<span class="dv">409</span>
    cpu time = <span class="fl">0.38</span> seconds
     <span class="dv">0</span> <span class="dv">341</span> (<span class="dv">2</span>); <span class="dv">1</span>:<span class="dv">4</span> <span class="dv">342</span>:<span class="dv">345</span> (<span class="dv">8</span>); <span class="dv">5</span>:<span class="dv">20</span> <span class="dv">346</span>:<span class="dv">361</span> (<span class="dv">32</span>); <span class="dv">21</span>:<span class="dv">84</span> <span class="dv">362</span>:<span class="dv">425</span> (<span class="dv">128</span>); <span class="dv">85</span>:<span class="dv">340</span>
        <span class="dv">426</span>:<span class="dv">681</span> (<span class="dv">512</span>);

    g3 = nx.balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)
    g3a = nx.convert_node_labels_to_integers(g3, first_label=(order_tree * <span class="dv">2</span>))
    graphs.append(g3a)
    forest2 = nx.union_all(graphs)

    f2d = sym._format_graph_as_nauty(forest2)
    <span class="kw">print</span> sym._get_raw_nauty_output(f2d)

    <span class="dv">5</span> orbits; grpsize=<span class="fl">5.395328432456e352</span>; <span class="dv">767</span> gens; <span class="dv">256020</span> nodes; maxlev=<span class="dv">613</span>
    cpu time = <span class="fl">1.31</span> seconds
     <span class="dv">0</span> <span class="dv">341</span> <span class="dv">682</span> (<span class="dv">3</span>); <span class="dv">1</span>:<span class="dv">4</span> <span class="dv">342</span>:<span class="dv">345</span> <span class="dv">683</span>:<span class="dv">686</span> (<span class="dv">12</span>); <span class="dv">5</span>:<span class="dv">20</span> <span class="dv">346</span>:<span class="dv">361</span> <span class="dv">687</span>:<span class="dv">702</span> (<span class="dv">48</span>); <span class="dv">21</span>:<span class="dv">84</span>
        <span class="dv">362</span>:<span class="dv">425</span> <span class="dv">703</span>:<span class="dv">766</span> (<span class="dv">192</span>); <span class="dv">85</span>:<span class="dv">340</span> <span class="dv">426</span>:<span class="dv">681</span> <span class="dv">767</span>:<span class="dv">1022</span> (<span class="dv">768</span>);</code></pre></td></tr></table>
<p>Adding a third balanced tree follows the same pattern. The only concern is the scaling of group size. Adding a fourth tree to give me some data points to work with.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">    g4 = nx.balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)
    g4a = nx.convert_node_labels_to_integers(g4, first_label=(order_tree * <span class="dv">3</span>))
    graphs.append(g4a)
    forest3 = nx.union_all(graphs)
    f3d = sym._format_graph_as_nauty(forest3)
    <span class="kw">print</span> sym._get_raw_nauty_output(f3d)

    <span class="dv">5</span> orbits; grpsize=<span class="fl">4.487799270734e470</span>; <span class="dv">1023</span> gens; <span class="dv">444760</span> nodes; maxlev=<span class="dv">817</span>
    cpu time = <span class="fl">3.10</span> seconds
     <span class="dv">0</span> <span class="dv">341</span> <span class="dv">682</span> <span class="dv">1023</span> (<span class="dv">4</span>); <span class="dv">1</span>:<span class="dv">4</span> <span class="dv">342</span>:<span class="dv">345</span> <span class="dv">683</span>:<span class="dv">686</span> <span class="dv">1024</span>:<span class="dv">1027</span> (<span class="dv">16</span>); <span class="dv">5</span>:<span class="dv">20</span> <span class="dv">346</span>:<span class="dv">361</span>
        <span class="dv">687</span>:<span class="dv">702</span> <span class="dv">1028</span>:<span class="dv">1043</span> (<span class="dv">64</span>); <span class="dv">21</span>:<span class="dv">84</span> <span class="dv">362</span>:<span class="dv">425</span> <span class="dv">703</span>:<span class="dv">766</span> <span class="dv">1044</span>:<span class="dv">1107</span> (<span class="dv">256</span>); <span class="dv">85</span>:<span class="dv">340</span>
        <span class="dv">426</span>:<span class="dv">681</span> <span class="dv">767</span>:<span class="dv">1022</span> <span class="dv">1108</span>:<span class="dv">1363</span> (<span class="dv">1024</span>);</code></pre></td></tr></table>
<p>The exponent is definitely going up as the power of the number of trees: <span class="math">\({10^{117}}^2 = 10^{234}\)</span>, and so on. But the other values are rising as well, and not by a simple multiplicative factor (which looked like 2). It looks like <span class="math">\(n!\)</span>.</p>
<p>So, with a forest of identical trees, with n trees, and <span class="math">\(s = |\textit{Aut}(g)|\)</span> for each tree, the total automorphism group size for the entire forest is thus <span class="math">\(n! s^n\)</span>. This is true for identical tree copies, but obviously more complex for non-identical components. We would not also see orbit multiplicities which are a simple factor of the base orbit multiplicity, and we’d expect that the orbit number would not be constant, of course.</p>
<p>So how do the orbit numbers etc behave with multiple non-identical components? I’m not going to get a general answer here (but of course that’s possible), but what follows are some simple examples to guide intuition.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">    gx1 = nx.balanced_tree(<span class="dv">3</span>,<span class="dv">3</span>)
    nx1 = stats.num_nodes_balanced_tree(<span class="dv">3</span>,<span class="dv">3</span>)
    gx2 = nx.balanced_tree(<span class="dv">4</span>,<span class="dv">4</span>)
    gx2a = nx.convert_node_labels_to_integers(gx2, first_label=nx1)

    graphs2 = []
    graphs2.append(gx1)
    graphs2.append(gx2a)
    foresth1 = nx.union_all(graphs2)

    <span class="kw">print</span> sym._get_raw_nauty_output(sym._format_graph_as_nauty(foresth1))

    <span class="dv">9</span> orbits; grpsize=<span class="fl">2.715950187930e127</span>; <span class="dv">281</span> gens; <span class="dv">36753</span> nodes; maxlev=<span class="dv">225</span>
    cpu time = <span class="fl">0.06</span> seconds
     <span class="dv">0</span>; <span class="dv">1</span>:<span class="dv">3</span> (<span class="dv">3</span>); <span class="dv">4</span>:<span class="dv">12</span> (<span class="dv">9</span>); <span class="dv">13</span>:<span class="dv">39</span> (<span class="dv">27</span>); <span class="dv">40</span>; <span class="dv">41</span>:<span class="dv">44</span> (<span class="dv">4</span>); <span class="dv">45</span>:<span class="dv">60</span> (<span class="dv">16</span>); <span class="dv">61</span>:<span class="dv">124</span> (<span class="dv">64</span>);
        <span class="dv">125</span>:<span class="dv">380</span> (<span class="dv">256</span>);</code></pre></td></tr></table>
<p>So…since the graph components are different, the orbits are disjoint and restricted to their own component. The total orbit number is simply the sum of the orbit numbers for the two components, and the orbit multiplicites and vertex membership are obviously restricted to each component (easy to see given the sequential vertex numbering).</p>
<p>The group size is greater than that of a single tree, but many orders of magnitude smaller than the combined group size of two identical trees. This likely reflects there being very few automorphisms between trees.</p>
  


<div class="well well-small">
<p class="text-info"><i class="icon-tags"></i>&nbsp;Tags</p>
<ul>

<li><a href='/tag/SAA2014.html'>SAA2014</a></li>

<li><a href='/tag/axelrod model.html'>axelrod model</a></li>

<li><a href='/tag/structured information.html'>structured information</a></li>

<li><a href='/tag/cultural transmission.html'>cultural transmission</a></li>

<li><a href='/tag/experiments.html'>experiments</a></li>

<li><a href='/tag/experiment-semanticaxelrod.html'>experiment-semanticaxelrod</a></li>

<li><a href='/tag/analysis.html'>analysis</a></li>

</ul>
</div>


</div>


        
      </div><!--/row-->


    


 
      <hr>

      <footer>
		        <p>&copy; Mark E. Madsen 2012-2014    <a href="mailto:mark@madsenlab.org">Email</a>&nbsp;||
		  <a href="http://orcid.org/0000-0001-9320-8377">ORCId</a>&nbsp;||
		  <a href="http://figshare.com/authors/Mark%20Madsen/279062">Figshare</a>&nbsp;||
		    <a href="http://www.linkedin.com/profile/view?id=8751">LinkedIn</a>&nbsp;|| 	    <a href="http://github.com/mmadsen">GitHub</a>&nbsp;||
        <a href="http://www.researchgate.net/profile/Mark_Madsen3/">ResearchGate</a>&nbsp;||
        <a href="https://washington.academia.edu/MarkMadsen">Academia.edu</a></p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap-transition.js"></script>
    <script src="/assets/js/bootstrap-alert.js"></script>
    <script src="/assets/js/bootstrap-modal.js"></script>
    <script src="/assets/js/bootstrap-dropdown.js"></script>
    <script src="/assets/js/bootstrap-scrollspy.js"></script>
    <script src="/assets/js/bootstrap-tab.js"></script>
    <script src="/assets/js/bootstrap-tooltip.js"></script>
    <script src="/assets/js/bootstrap-popover.js"></script>
    <script src="/assets/js/bootstrap-button.js"></script>
    <script src="/assets/js/bootstrap-collapse.js"></script>
    <script src="/assets/js/bootstrap-carousel.js"></script>
    <script src="/assets/js/bootstrap-typeahead.js"></script>

  </body>
</html>
